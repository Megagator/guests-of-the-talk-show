{"version":3,"file":"component---src-templates-guest-template-js-435ade7eded180e4ae65.js","mappings":"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","sources":["webpack://guests-of-the-talk-show/./src/components/EpisodeList.js","webpack://guests-of-the-talk-show/./src/components/GuestStats.js","webpack://guests-of-the-talk-show/./src/style/guest_stats.module.css","webpack://guests-of-the-talk-show/./src/templates/guestTemplate.js","webpack://guests-of-the-talk-show/./src/style/guest.module.css"],"sourcesContent":["import * as React from 'react'\nimport { DateTime } from 'luxon'\nimport { Link } from 'gatsby'\n\nimport friendlyDuration from '../utilities/friendlyDuration.js'\nimport isoToLocalString from '../utilities/isoToLocaleString.js'\n\nimport * as mainStyle from '../style/main.module.css'\nimport * as tableStyle from '../style/appearances_table.module.css'\n\nimport Episodes from '../../content/episodes.json'\n\n// sudo-enums\nconst SortKey = {\n  Episode: 'Episode',\n  Date: 'Date',\n  Duration: 'Duration',\n}\nconst SortOrder = {\n  Asc: 'ascending',\n  Desc: 'descending',\n}\n\nconst makeSortTitle = (currentSort, currentOrder, buttonsSort) => {\n  let order = currentOrder\n  if (currentSort === buttonsSort) {\n    if (currentOrder === SortOrder.Asc) {\n      order = SortOrder.Desc\n    } else {\n      order = SortOrder.Asc\n    }\n  }\n\n  return `Sort the table by the ${buttonsSort}, ${order}`\n}\n\nconst EpsisodeList = (props) => {\n  let [sort, setSort] = React.useState(SortKey.Episode)\n  let [order, setOrder] = React.useState(SortOrder.Desc)\n\n  const reorderTable = (newSort) => {\n    if (sort === newSort) {\n      if (order === SortOrder.Desc) {\n        setOrder(SortOrder.Asc)\n      } else {\n        setOrder(SortOrder.Desc)\n      }\n    } else {\n      setSort(newSort)\n    }\n  }\n\n  const filteredEpisodes = Episodes.filter((epi) => {\n    for (const guest of epi.guests) {\n      if (guest === props.guest) {\n        return true\n      }\n    }\n\n    return false\n  })\n\n  filteredEpisodes.sort((a, b) => {\n    let sortResult = 0\n    switch (sort) {\n      default:\n      case SortKey.Episode:\n        sortResult = a.number - b.number\n        break\n      case SortKey.Date:\n        sortResult = DateTime.fromISO(a.pubDate) - DateTime.fromISO(b.pubDate)\n        break\n      case SortKey.Duration:\n        sortResult = a.durationSeconds - b.durationSeconds\n    }\n\n    // defaults to ascending\n    if (order === SortOrder.Desc) {\n      sortResult = sortResult * -1\n    }\n\n    return sortResult\n  })\n\n  return (\n    <div className={tableStyle.graph_wrapper}>\n      <table className={tableStyle.graph}>\n        <thead>\n          <tr>\n            <td>\n              <button\n                onClick={() => reorderTable(SortKey.Episode)}\n                className={`${mainStyle.title} ${\n                  sort === SortKey.Episode ? tableStyle.active : ''\n                } ${\n                  order === SortOrder.Asc\n                    ? tableStyle.sort_asc\n                    : tableStyle.sort_desc\n                }`}\n                title={makeSortTitle(sort, order, SortKey.Episode)}\n              >\n                {SortKey.Episode}\n              </button>\n            </td>\n            <td>\n              <button\n                onClick={() => reorderTable(SortKey.Date)}\n                className={`${mainStyle.title} ${\n                  sort === SortKey.Date ? tableStyle.active : ''\n                } ${\n                  order === SortOrder.Asc\n                    ? tableStyle.sort_asc\n                    : tableStyle.sort_desc\n                }`}\n                title={makeSortTitle(sort, order, SortKey.Date)}\n              >\n                {SortKey.Date}\n              </button>\n            </td>\n            <td>\n              <button\n                onClick={() => reorderTable(SortKey.Duration)}\n                className={`${mainStyle.title} ${\n                  sort === SortKey.Duration ? tableStyle.active : ''\n                } ${\n                  order === SortOrder.Asc\n                    ? tableStyle.sort_asc\n                    : tableStyle.sort_desc\n                }`}\n                title={makeSortTitle(sort, order, SortKey.Duration)}\n              >\n                {SortKey.Duration}\n              </button>\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          {filteredEpisodes.map((epi, i) => {\n            return (\n              <tr key={`episode_${epi.number}`}>\n                <td>\n                  <Link to={`/episode/${epi.slug}`}>\n                    {`${epi.number}: ${epi.title}`}\n                  </Link>\n                </td>\n                <td>{isoToLocalString(epi.pubDate)}</td>\n                <td>{friendlyDuration(epi.durationSeconds)}</td>\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\nexport default EpsisodeList\n","import * as React from 'react'\nimport { DateTime } from 'luxon'\n\nimport * as statStyle from '../style/guest_stats.module.css'\n\nimport Episodes from '../../content/episodes.json'\n\nconst GuestStats = (props) => {\n  const [episodes, setEpisodes] = React.useState([])\n  const [cadence, setCadence] = React.useState(0)\n  const [next, setNext] = React.useState(null)\n  const [nextDiff, setNextDiff] = React.useState(null)\n\n  React.useEffect(() => {\n    const filteredEpisodes = Episodes.filter((epi) => {\n      for (const guest of epi.guests) {\n        if (guest === props.guest) {\n          return true\n        }\n      }\n\n      return false\n    })\n\n    filteredEpisodes.reverse()\n    setEpisodes(filteredEpisodes)\n\n    const daysInBetween = []\n    let previousApp = null\n    for (const appearance of filteredEpisodes) {\n      if (previousApp !== null) {\n        const newApp = DateTime.fromISO(appearance.pubDate)\n        const diff = newApp.diff(previousApp, 'days').toObject()\n        daysInBetween.push(Math.abs(diff.days))\n      }\n\n      previousApp = DateTime.fromISO(appearance.pubDate)\n    }\n\n    const sum = daysInBetween.reduce((prev, curr) => prev + curr, 0)\n    const averageDays = Math.round(sum / filteredEpisodes.length)\n    setCadence(averageDays)\n\n    if (averageDays > 0) {\n      const lastApp = previousApp\n      const projectedNextApp = lastApp.plus({ days: averageDays })\n      setNext(projectedNextApp)\n\n      const diffNow = projectedNextApp.diffNow('days').toObject().days\n      setNextDiff(Math.round(diffNow))\n    }\n  }, [props.guest])\n\n  return (\n    <div className={statStyle.stat_table}>\n      <table>\n        <tbody>\n          <tr>\n            <td>Appearances</td>\n            <td>{episodes.length}</td>\n          </tr>\n          <tr>\n            <td>Cadence</td>\n            {cadence === 0 ? <td>None</td> : <td>{cadence} days</td>}\n          </tr>\n          <tr>\n            <td>Next</td>\n            {next === null ? (\n              <td>None</td>\n            ) : (\n              <td>\n                {next.toLocaleString(DateTime.DATE_MED)}\n                <br />\n                {nextDiff > 0 ? (\n                  <em>(in {nextDiff} days)</em>\n                ) : (\n                  <em>({Math.abs(nextDiff).toLocaleString()} days ago)</em>\n                )}\n              </td>\n            )}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\nexport default GuestStats\n","// extracted by mini-css-extract-plugin\nexport var stat_table = \"guest_stats-module--stat_table--R3nt3\";","import React from 'react'\n\nimport Header from '../components/Header.js'\nimport DurationChart from '../components/DurationChart.js'\nimport EpisodeList from '../components/EpisodeList.js'\nimport GuestStats from '../components/GuestStats.js'\n\nimport * as mainStyle from '../style/main.module.css'\nimport * as guestStyle from '../style/guest.module.css'\n\nconst guestTemplate = (props) => {\n  const { pageContext } = props\n  const { guest } = pageContext\n\n  return (\n    <main className={mainStyle.container}>\n      <title>{guest} | Guest of The Talk Show</title>\n      <div className={mainStyle.container}>\n        <Header isSingular={true} />\n        <h1\n          className={`${mainStyle.title} ${mainStyle.text_center} ${mainStyle.m_bot_lg} ${mainStyle.m_top_lg}`}\n        >\n          {guest}\n        </h1>\n        <div className={guestStyle.episode_guest_wrapper}>\n          {/* order flipped in css when two up */}\n          <GuestStats guest={guest} />\n          <EpisodeList guest={guest} />\n        </div>\n        <DurationChart guest={guest} />\n      </div>\n    </main>\n  )\n}\n\nexport default guestTemplate\n","// extracted by mini-css-extract-plugin\nexport var episode_guest_wrapper = \"guest-module--episode_guest_wrapper--R6dby\";\nexport var stat_table = \"guest-module--stat_table--DdItt\";"],"names":["SortKey","SortOrder","makeSortTitle","currentSort","currentOrder","buttonsSort","order","props","React","sort","setSort","setOrder","reorderTable","newSort","filteredEpisodes","Episodes","epi","guests","guest","a","b","sortResult","number","DateTime","pubDate","durationSeconds","className","tableStyle","onClick","mainStyle","title","map","i","key","to","slug","isoToLocalString","friendlyDuration","episodes","setEpisodes","cadence","setCadence","next","setNext","nextDiff","setNextDiff","reverse","daysInBetween","previousApp","appearance","diff","toObject","push","Math","abs","days","sum","reduce","prev","curr","averageDays","round","length","projectedNextApp","plus","diffNow","toLocaleString","pageContext","Header","isSingular","EpisodeList","DurationChart"],"sourceRoot":""}